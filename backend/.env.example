# Server Configuration
PORT=3001
NODE_ENV=development

# Supabase Configuration
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_KEY=your-service-role-key

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRES_IN=7d
JWT_EXTERNAL_EXPIRES_IN=5m

# Frontend URL (for CORS)
FRONTEND_URL=http://localhost:5173

# Production URLs
# FRONTEND_URL=https://suite.doid.it

# Super Admin Configuration
# Comma-separated list of super admin emails
SUPER_ADMIN_EMAILS=admin@doid.it

# External Service URLs
SMART_REVIEW_URL=https://review.doid.it
SMART_PAGE_URL=https://page.doid.it
MENU_DIGITALE_URL=https://menu.doid.it
DISPLAY_SUITE_URL=https://display.doid.it

# ================================================================================
# GoHighLevel Webhook Configuration
# ================================================================================
# NUOVO FLUSSO:
# 1. user.verified      → Email GENERICA (benvenuto, senza servizio specifico)
# 2. service.trial_activated → Email SPECIFICA per il servizio scelto dall'utente
# 3. trial.day_*        → Reminder SPECIFICI per ogni servizio attivo
# ================================================================================

# URL Fallback (used if specific URL not configured)
GHL_WEBHOOK_URL=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/yyy

# ===== ACCOUNT E REGISTRAZIONE (GENERICO - senza servizio) =====
GHL_WEBHOOK_USER_REGISTERED=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/user-registered
GHL_WEBHOOK_USER_VERIFIED=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/user-verified

# ===== ATTIVAZIONE SERVIZI (SPECIFICO - con servizio) =====
# Inviato quando l'utente sceglie e attiva il trial per un servizio
GHL_WEBHOOK_SERVICE_TRIAL_ACTIVATED=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/service-trial-activated

# ===== ADMIN =====
GHL_WEBHOOK_ADMIN_USER_CREATED=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/admin-user-created
GHL_WEBHOOK_ADMIN_SETUP_COMPLETE=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/admin-setup-complete

# ===== TRIAL REMINDERS (include servizio specifico nel payload) =====
GHL_WEBHOOK_TRIAL_STARTED=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/trial-started
GHL_WEBHOOK_TRIAL_DAY_7=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/trial-day-7
GHL_WEBHOOK_TRIAL_DAY_14=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/trial-day-14
GHL_WEBHOOK_TRIAL_DAY_21=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/trial-day-21
GHL_WEBHOOK_TRIAL_DAY_27=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/trial-day-27
GHL_WEBHOOK_TRIAL_EXPIRING=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/trial-expiring
GHL_WEBHOOK_TRIAL_EXPIRED=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/trial-expired

# ===== ABBONAMENTI =====
GHL_WEBHOOK_SUBSCRIPTION_CREATED=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/subscription-created
GHL_WEBHOOK_SUBSCRIPTION_ACTIVATED=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/subscription-activated
GHL_WEBHOOK_SUBSCRIPTION_RENEWED=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/subscription-renewed
GHL_WEBHOOK_SUBSCRIPTION_CANCELLED=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/subscription-cancelled
GHL_WEBHOOK_SUBSCRIPTION_EXPIRED=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/subscription-expired
GHL_WEBHOOK_PAYMENT_FAILED=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/payment-failed

# ===== PASSWORD =====
GHL_WEBHOOK_PASSWORD_RESET=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/password-reset

# ===== AGENCY (opzionali) =====
GHL_WEBHOOK_ORG_UPGRADED=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/org-upgraded
GHL_WEBHOOK_ACTIVITY_CREATED=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/activity-created
GHL_WEBHOOK_MEMBER_INVITED=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/member-invited
GHL_WEBHOOK_MEMBER_JOINED=https://services.leadconnectorhq.com/hooks/xxx/webhook-trigger/member-joined

# Custom Webhook (optional)
CUSTOM_WEBHOOK_URL=
CUSTOM_WEBHOOK_SECRET=

# Webhook Configuration
WEBHOOK_MAX_RETRIES=3
WEBHOOK_TIMEOUT=10000

# Trial Reminder Job
ENABLE_TRIAL_REMINDERS=false

# ================================================================================
# GoHighLevel Payment Links Configuration
# ================================================================================
# Payment Links per il checkout abbonamenti PRO
# Creare i link in GHL: Payments > Payment Links
# ================================================================================

# Smart Review
GHL_PAYMENT_LINK_SMART_REVIEW_MONTHLY=https://checkout.gohighlevel.com/v1/your-link-monthly
GHL_PAYMENT_LINK_SMART_REVIEW_YEARLY=https://checkout.gohighlevel.com/v1/your-link-yearly

# Smart Page
GHL_PAYMENT_LINK_SMART_PAGE_MONTHLY=https://checkout.gohighlevel.com/v1/your-link-monthly
GHL_PAYMENT_LINK_SMART_PAGE_YEARLY=https://checkout.gohighlevel.com/v1/your-link-yearly

# Menu Digitale
GHL_PAYMENT_LINK_MENU_DIGITALE_MONTHLY=https://checkout.gohighlevel.com/v1/your-link-monthly
GHL_PAYMENT_LINK_MENU_DIGITALE_YEARLY=https://checkout.gohighlevel.com/v1/your-link-yearly

# Display Suite
GHL_PAYMENT_LINK_DISPLAY_SUITE_MONTHLY=https://checkout.gohighlevel.com/v1/your-link-monthly
GHL_PAYMENT_LINK_DISPLAY_SUITE_YEARLY=https://checkout.gohighlevel.com/v1/your-link-yearly

# ================================================================================
# Webhook Receive Secret (for GHL → DOID Suite webhooks)
# ================================================================================
# Secret da configurare nel workflow GHL che invia webhook a DOID Suite
GHL_WEBHOOK_RECEIVE_SECRET=your-secret-key-for-incoming-webhooks
